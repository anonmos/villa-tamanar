<!DOCTYPE html>

<head>
  <link rel="icon" type="image/jpeg" href="./assets/favicon.jpeg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <script src="./libs/simple-lightbox.min.js"></script>
  <link href="./libs/simple-lightbox.min.css" rel="stylesheet">
  <style>
    body {
      margin: 0;
    }

    .quad-banner-element {
      width: 25%;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
    }

    img.quad-banner-text {
      width: 15%;
      position: absolute;
      opacity: 0;
    }

    img.qb-hover-effect {
      opacity: 1;
      transition: opacity 0.3s ease-in-out;
    }

    html {
      scroll-behavior: smooth;
    }

    .hidden-scrollbar::-webkit-scrollbar {
      display: none;
    }

    .hidden-scrollbar {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    /* Customize website's scrollbar like Mac OS
    Not supports in Firefox and IE */

    /* total width */
    .mac-scrollbar::-webkit-scrollbar {
      background-color: #fff;
      width: 16px;
      height: 5px;
    }

    /* background of the scrollbar except button or resizer */
    .mac-scrollbar::-webkit-scrollbar-track {
      background-color: #4f4f4f;
    }

    /* scrollbar itself */
    .mac-scrollbar::-webkit-scrollbar-thumb {
      background-color: #babac0;
      border-radius: 16px;
      border: 0.5px solid #babac0;
    }

    /* set button(top and bottom of the scrollbar) */
    .mac-scrollbar::-webkit-scrollbar-button {
      display: none;
    }

    .special-message {
      font-family: 'Inter', sans-serif;
    }

    /* Loading spinner CSS */
    .lds-ellipsis {
      display: inline-block;
      position: absolute;
      min-width: 80px;
      min-height: 80px;
      width: 80px;
      height: 80px;
    }

    .lds-ellipsis div {
      position: absolute;
      top: 33px;
      width: 13px;
      height: 13px;
      border-radius: 50%;
      background: #fff;
      animation-timing-function: cubic-bezier(0, 1, 1, 0);
    }

    .lds-ellipsis div:nth-child(1) {
      left: 8px;
      animation: lds-ellipsis1 0.6s infinite;
    }

    .lds-ellipsis div:nth-child(2) {
      left: 8px;
      animation: lds-ellipsis2 0.6s infinite;
    }

    .lds-ellipsis div:nth-child(3) {
      left: 32px;
      animation: lds-ellipsis2 0.6s infinite;
    }

    .lds-ellipsis div:nth-child(4) {
      left: 56px;
      animation: lds-ellipsis3 0.6s infinite;
    }

    @keyframes lds-ellipsis1 {
      0% {
        transform: scale(0);
      }

      100% {
        transform: scale(1);
      }
    }

    @keyframes lds-ellipsis3 {
      0% {
        transform: scale(1);
      }

      100% {
        transform: scale(0);
      }
    }

    @keyframes lds-ellipsis2 {
      0% {
        transform: translate(0, 0);
      }

      100% {
        transform: translate(24px, 0);
      }
    }

    /* End loading spinner CSS */

    /* Start bouncing arrow CSS */

    .bounce {
      animation: bounce 2s infinite;
    }

    @keyframes bounce {

      0%,
      20%,
      50%,
      80%,
      100% {
        transform: translateY(0);
      }

      40% {
        transform: translateY(-30px);
      }

      60% {
        transform: translateY(-15px);
      }
    }

    /* End bouncing arrow CSS */
  </style>
</head>

<body>
  <div id="rotate-screen" class="special-message"
    style="display: none; justify-content: center; align-items: center; width: 80%; height: 100vh; font-size: 40px; text-align: center; margin: 0 auto;">
    Best viewed on desktop or tablet. If viewing on mobile, please rotate device and refresh.
  </div>
  <div id="intro-video"
    style="display: flex; justify-content: center; align-items: center; background-color: black; height: 100vh;">
    <div id="loading-spinner" class="lds-ellipsis">
      <div></div>
      <div></div>
      <div></div>
      <div></div>
    </div>
    <video id="intro-video-player" muted autoplay playsinline>
      <source src="./assets/Intro_1.mp4" />
    </video>
    <div id="skip-intro-button"
      style="width: 180px; height: 50px; position: absolute; background-color: #FFFFFF; right: 0; display: flex; justify-content: center; align-items: center; cursor: pointer;">
      <img src="./assets/skip-intro-button-contents.svg" />
    </div>
  </div>
  <div id="navbar"
    style="width: 100%; display: none; position: fixed; z-index: 9999; background-color: white; height: 50px;">
    <div style="width: 100%; display: flex; justify-content: center; align-items: center; cursor: pointer;">
      <img src="./assets/villa-tamanar-logo-black.svg" />
    </div>
  </div>
  <div id="landing-page" style="display: none;">
    <div id="first-video-parent"
      style="width: 100%; display: flex; justify-content: center; align-items: center; height: 1110px; background-color: black;">
      <video id="first-video" muted autoplay playsinline>
        <source src="./assets/Homepage.mp4">
      </video>
      <div id="first-video-mask"
        style="background: rgba(0, 0, 0, .5); position: absolute; height: 768px; width: 100%;"></div>
      <img src="./assets/first-video-overlay.svg"
        style="width: 100%; position: absolute; width: 30%; height: 1118px;" />
      <img id="scroll-chevron" class="bounce" src="./assets/angle-down-solid.svg"
        style="position: absolute; width: 30px; height: 30px; bottom: 20px; cursor: pointer;" />
    </div>
    <img id="second-image" style="width: 100%; margin: -5px 0 0; height: 764px; object-fit: cover;" src="./assets/second-image.png" />
    <div id="dimensions" style="display: flex; justify-content: center; align-items: center; margin: 29px 0;">
      <img style="width: 60%;" src="./assets/dimensions.svg" />
    </div>
    <div id="second-video-parent"
      style="display: flex; justify-content: center; align-items: center; flex-direction: column;">
      <video id="second-video" muted autoplay playsinline>
        <source src="./assets/section-2.mp4">
      </video>
      <div style="display: flex; justify-content: flex-end; width: 100%; margin: -84px 0 0; position: relative;">
        <img style="width: 90%;" src="./assets/specs.svg" />
      </div>
    </div>
    <div id="description-banner-1"
      style="margin-top: 140px; width: 100%; display: flex; flex-direction: row; justify-content: space-between; align-items: center;">
      <img style="width: 55%;" src="./assets/description-banner-1-image.png" />
      <div style="display: flex; justify-content: center; align-items: center; width: 35%;">
        <img style="width: 100%; margin: 30px;" src="./assets/description-banner-1-text.svg">
      </div>
    </div>
    <div id="description-banner-2"
      style="margin-top: 140px; width: 100%; display: flex; flex-direction: row; justify-content: space-between; align-items: center;">
      <div style="display: flex; justify-content: center; align-items: center; width: 50%;">
        <img style="width: 70%;" src="./assets/description-banner-2-text.svg">
      </div>
      <img style="width: 55%;" src="./assets/description-banner-2-image.png" />
    </div>
    <div
      style="margin-top: 140px; width: 100%; display: flex; flex-direction: row; justify-content: space-between; align-items: center;">
      <img style="width: 55%;" src="./assets/description-banner-3-image.png" />
      <div style="display: flex; justify-content: center; align-items: center; width: 40%; height: 100%;">
        <img style="width: 60%;" src="./assets/description-banner-3-text.svg">
      </div>
    </div>
    <div
      style="margin-top: 140px; width: 100%; display: flex; flex-direction: row; justify-content: space-between; align-items: center;">
      <div style="display: flex; justify-content: center; align-items: center; width: 50%;">
        <img style="width: 60%;" src="./assets/description-banner-4-text.svg">
      </div>
      <img style="width: 55%;" src="./assets/description-banner-4-image.png" />
    </div>
    <div style="margin-top: 145px;">
      <div id="third-video-overlay" style="position: absolute; width: 100%;">
        <img style="width: 100%;" src="./assets/quote-vid-overlay.svg">
      </div>
      <video id="third-video" muted autoplay playsinline>
        <source src="./assets/quote-01.mp4">
      </video>
    </div>
    <div style="display: flex; justify-content: center; align-items: center; margin-top: 185px; width: 100%;">
      <div style="display: flex; justify-content: center; align-items: center; flex-direction: column; width: 50%;">
        <img style="width: 60%;" src="./assets/vertical-description-image-1.png" />
        <div style="display: flex; justify-content: flex-start; width: 60%; margin-top: 50px;">
          <img style="width: 70%;" src="./assets/vertical-description-text-1.svg" />
        </div>
      </div>
      <div
        style="display: flex; flex-direction: column; width: 50%; justify-content: space-between; align-items: center;">
        <div style="width: 60%; margin-bottom: 50px;">
          <img style="width: 70%;" src="./assets/vertical-description-text-2.svg" />
        </div>
        <img style="width: 60%;" src="./assets/vertical-description-image-2.png" />
      </div>
    </div>
    <div style="margin-top: 200px;">
      <video id="fourth-video" muted autoplay playsinline>
        <source src="./assets/Section5.mp4">
      </video>
    </div>
    <div style="width: 100%; display: flex; justify-content: center; align-items: center; margin-top: 110px;">
      <img style="width: 70%" src="./assets/amenities.svg" />
    </div>
    <div style="margin-top: 150px;">
      <img style="width: 100%;" src="./assets/luxury-living-banner.svg" />
    </div>
    <div style="display: flex; justify-content: center; align-items: center; width: 100%; margin-top: -5px; background-color: #232323;">
      <div class="quad-banner-element" bedroom-gallery>
        <img class="quad-banner-img" src="./assets/quad-banner-bedrooms-image.png" style="object-fit: cover;" />
        <img class="quad-banner-text" src="./assets/quad-banner-bedrooms-text.svg" />
      </div>
      <div class="quad-banner-element" bathroom-gallery>
        <img class="quad-banner-img" src="./assets/quad-banner-bathroom-image.png" style="object-fit: cover;" />
        <img class="quad-banner-text" src="./assets/quad-banner-bathrooms-text.svg" />
      </div>
      <div class="quad-banner-element" style="margin: 0 0 0 0" living-space-gallery>
        <img class="quad-banner-img" src="./assets/quad-banner-living-space-image.png" style="object-fit: cover;" />
        <img class="quad-banner-text" src="./assets/quad-banner-living-space-text.svg" />
      </div>
      <div class="quad-banner-element" style="margin: 0 0 0 -1px" outdoor-gallery>
        <img class="quad-banner-img" src="./assets/quad-banner-outdoor-image.png" style="object-fit: cover;" />
        <img class="quad-banner-text" style="width: 13%;" src="./assets/quad-banner-outdoor-text.svg" />
      </div>
    </div>
    <div
      style="background-color: #232323; width: 100%; padding: 175px 0 0; display: flex; justify-content: center; align-items: center; flex-direction: column;">
      <img style="width: 80%;" src="./assets/what-if-banner.svg" />
      <img style="margin-top: 25px; margin-bottom: 20px;" src="./assets/once-upon-a-time-banner.svg" />
    </div>
    <div id="carousel"
      style="background-color: #232323; width: 100%; overflow-x: scroll; display: flex; padding-bottom: 30px;"
      class="mac-scrollbar">
      <img src="./assets/carousel-image-1.png" />
      <img src="./assets/carousel-image-2.png" />
      <img src="./assets/carousel-image-3.png" />
      <img src="./assets/carousel-image-4.png" />
      <img src="./assets/carousel-image-5.png" />
      <img src="./assets/carousel-image-6.png" />
      <img src="./assets/carousel-image-7.png" />
      <img src="./assets/carousel-image-8.png" />
      <img src="./assets/carousel-image-9.png" />
    </div>
    <div style="background-color: #232323; height: 200px; min-height: 200px; width: 100%"></div>
    <div style="width: 100%; display: flex; justify-content: center; align-items: center;">
      <img style="width: 100%;" src="./assets/attractive-people-banner-image.png" />
      <img style="position: absolute; width: 100%;" src="./assets/attractive-people-banner-text.svg" />
    </div>
    <div style="margin: 100px 0; display: flex; justify-content: center; align-items: center;">
      <div style="width: 40%; display: flex; justify-content: center; align-items: center;">
        <img style="width: 60%;" src="./assets/neighborhood-text.svg" />
      </div>
      <div style="width: 60%;">
        <img style="width: 100%;" src="./assets/neighborhood-image.png" />
      </div>
    </div>
    <div
      style="background-color: #EDF3E6; padding-top: 90px; display: flex; justify-content: center; align-items: center; flex-direction: column;">
      <img style="width: 80%;" src="./assets/roquebrune-cap-martin-banner-image.png" />
      <img style="margin: 50px 0; width: 80%;" src="./assets/roquebrune-cap-martin-banner-text.svg" />
    </div>
    <div style="width: 100%; display: flex; justify-content: center; margin-top: 130px;">
      <div style="width: 40%; display: flex; justify-content: center; align-items: center;">
        <img style="width: 60%;" src="./assets/domain-de-la-torraca-banner-text.svg">
      </div>
      <div style="width: 60%;">
        <img style="width: 100%;" src="./assets/domain-de-la-torraca-banner-image.png" />
      </div>
    </div>
    <div style="display: flex; margin-top: 230px; margin-bottom: 460px;">
      <div style="width: 50%; display: flex; justify-content: center; align-items: center;">
        <img style="width: 80%;" src="./assets/gare-banner-image.png" />
      </div>
      <div style="width: 50%; display: flex; justify-content: center; align-items: center;">
        <img style="width: 60%;" src="./assets/gare-banner-text.svg" />
      </div>
    </div>
    <div id="fifth-video-container"
      style="display: flex; justify-content: center; align-items: center; position: absolute; width: 100%;">
      <video id="fifth-video" muted autoplay playsinline>
        <source src="./assets/Outro.mp4">
      </video>
    </div>
    <div style="width: 100%; display: flex; justify-content: center;">
      <img style="width: 100%;" src="./assets/villa-tamanar-cartoon.png" />
      <img id="escape-noise-text" style="width: 20%; position: absolute; margin-top: 250px;"
        src="./assets/villa-tamanar-escape-noise-text.svg" />
    </div>
    <div
      style="background-color: #232323; height: 200px; display: flex; justify-content: space-around; flex-direction: column; align-items: center; padding: 15px 0;">
      <img style="width: 20%;" src="./assets/villa-tamanar-logo.svg" />
      <img id="back-to-top" style="width: 7%; cursor: pointer;" src="./assets/back-to-top.svg" />
      <img style="width: 10%;" src="./assets/copyright.svg" />
    </div>
  </div>
  <div class="bedroom-gallery" style="display: none;">
    <a href="./assets/bedroom-gallery-1.jpg"><img src="./assets/bedroom-gallery-1.jpg" /></a>
    <a href="./assets/bedroom-gallery-2.jpg"><img src="./assets/bedroom-gallery-2.jpg" /></a>
    <a href="./assets/bedroom-gallery-3.jpg"><img src="./assets/bedroom-gallery-3.jpg" /></a>
    <a href="./assets/bedroom-gallery-4.jpg"><img src="./assets/bedroom-gallery-4.jpg" /></a>
    <a href="./assets/bedroom-gallery-5.jpg"><img src="./assets/bedroom-gallery-5.jpg" /></a>
    <a href="./assets/bedroom-gallery-6.jpg"><img src="./assets/bedroom-gallery-6.jpg" /></a>
    <a href="./assets/bedroom-gallery-7.jpg"><img src="./assets/bedroom-gallery-7.jpg" /></a>
    <a href="./assets/bedroom-gallery-8.jpg"><img src="./assets/bedroom-gallery-8.jpg" /></a>
  </div>
  <div class="bathroom-gallery" style="display: none;">
    <a href="./assets/bathroom-gallery-1.jpg"><img src="./assets/bathroom-gallery-1.jpg" /></a>
    <a href="./assets/bathroom-gallery-2.jpg"><img src="./assets/bathroom-gallery-2.jpg" /></a>
    <a href="./assets/bathroom-gallery-3.jpg"><img src="./assets/bathroom-gallery-3.jpg" /></a>
    <a href="./assets/bathroom-gallery-4.jpg"><img src="./assets/bathroom-gallery-4.jpg" /></a>
    <a href="./assets/bathroom-gallery-5.jpg"><img src="./assets/bathroom-gallery-5.jpg" /></a>
    <a href="./assets/bathroom-gallery-6.jpg"><img src="./assets/bathroom-gallery-6.jpg" /></a>
    <a href="./assets/bathroom-gallery-7.jpg"><img src="./assets/bathroom-gallery-7.jpg" /></a>
    <a href="./assets/bathroom-gallery-8.jpg"><img src="./assets/bathroom-gallery-8.jpg" /></a>
    <a href="./assets/bathroom-gallery-9.jpg"><img src="./assets/bathroom-gallery-9.jpg" /></a>
  </div>
  <div class="living-space-gallery" style="display: none;">
    <a href="./assets/living-space-gallery-1.jpg"><img src="./assets/living-space-gallery-1.jpg"></a>
    <a href="./assets/living-space-gallery-2.jpg"><img src="./assets/living-space-gallery-2.jpg"></a>
    <a href="./assets/living-space-gallery-3.jpg"><img src="./assets/living-space-gallery-3.jpg"></a>
    <a href="./assets/living-space-gallery-4.jpg"><img src="./assets/living-space-gallery-4.jpg"></a>
    <a href="./assets/living-space-gallery-5.jpg"><img src="./assets/living-space-gallery-5.jpg"></a>
    <a href="./assets/living-space-gallery-6.jpg"><img src="./assets/living-space-gallery-6.jpg"></a>
    <a href="./assets/living-space-gallery-7.jpg"><img src="./assets/living-space-gallery-7.jpg"></a>
    <a href="./assets/living-space-gallery-8.jpg"><img src="./assets/living-space-gallery-8.jpg"></a>
    <a href="./assets/living-space-gallery-9.jpg"><img src="./assets/living-space-gallery-9.jpg"></a>
    <a href="./assets/living-space-gallery-10.jpg"><img src="./assets/living-space-gallery-10.jpg"></a>
    <a href="./assets/living-space-gallery-11.jpg"><img src="./assets/living-space-gallery-11.jpg"></a>
  </div>
  <div class="outdoor-gallery" style="display: none;">
    <a href="./assets/outdoor-gallery-1.jpg"><img src="./assets/outdoor-gallery-1.jpg"></a>
    <a href="./assets/outdoor-gallery-2.jpg"><img src="./assets/outdoor-gallery-2.jpg"></a>
    <a href="./assets/outdoor-gallery-3.jpg"><img src="./assets/outdoor-gallery-3.jpg"></a>
    <a href="./assets/outdoor-gallery-4.jpg"><img src="./assets/outdoor-gallery-4.jpg"></a>
    <a href="./assets/outdoor-gallery-5.jpg"><img src="./assets/outdoor-gallery-5.jpg"></a>
    <a href="./assets/outdoor-gallery-6.jpg"><img src="./assets/outdoor-gallery-6.jpg"></a>
    <a href="./assets/outdoor-gallery-7.jpg"><img src="./assets/outdoor-gallery-7.jpg"></a>
    <a href="./assets/outdoor-gallery-8.jpg"><img src="./assets/outdoor-gallery-8.jpg"></a>
    <a href="./assets/outdoor-gallery-9.jpg"><img src="./assets/outdoor-gallery-9.jpg"></a>
    <a href="./assets/outdoor-gallery-10.jpg"><img src="./assets/outdoor-gallery-10.jpg"></a>
    <a href="./assets/outdoor-gallery-11.jpg"><img src="./assets/outdoor-gallery-11.jpg"></a>
    <a href="./assets/outdoor-gallery-12.jpg"><img src="./assets/outdoor-gallery-12.jpg"></a>
    <a href="./assets/outdoor-gallery-13.jpg"><img src="./assets/outdoor-gallery-13.jpg"></a>
  </div>
</body>

</html>

<script>
  const videoTags = ['first-video', 'third-video', 'fourth-video'];
  const introVideoPlayerTag = 'intro-video-player'
  const specialVideoTagWidth = 'second-video'
  const outtroVideoTagWidth = 'fifth-video'
  const outtroVideoTagWidthParentElement = 'fifth-video-container'
  const backToTopElementTag = 'back-to-top'
  const slidingElementId = 'carousel'
  const navbarId = 'navbar'
  const slidingElement = document.getElementById(slidingElementId)
  const firstSectionScrollPosition = 1056;
  const scrollChevron = document.getElementById('scroll-chevron')
  let mouseDown = false
  let startX, scrollLeft

  let chromeMobileWidthBugDetected = false

  // If we're on mobile and we're vertical, show a message that they need to rotate
  document.addEventListener('DOMContentLoaded', () => {
    if (isMobile() && isVertical()) {
      showRotateMessage()
    } else {
      hideRotateMessage()
      resetIntroVideoWidth()
    }
  })

  // Detect a rotation and check if we're vertical.  Throw the vertical message if so.  Otherwise
  // clear the vertical message.
  window.onresize = () => {
    if (isMobile() && isVertical()) {
      showRotateMessage()
    } else {
      hideRotateMessage()
      resetIntroVideoWidth()
    }

    checkForChromeMobileWidthBug()

    if (isLandingPageElementVisible()) {
      performLandingPageSetup()
    }
  }

  /** Slim Aarons sliding carousel handling **/
  let startDragging = function (e) {
    mouseDown = true;
    startX = e.pageX - slidingElement.offsetLeft;
    scrollLeft = slidingElement.scrollLeft;
  };
  let stopDragging = function (event) {
    mouseDown = false;
  };

  slidingElement.addEventListener('mousemove', (e) => {
    e.preventDefault();
    if (!mouseDown) { return; }
    const x = e.pageX - slidingElement.offsetLeft;
    const scroll = x - startX;
    slidingElement.scrollLeft = scrollLeft - scroll;
  });

  // Add the event listeners
  slidingElement.addEventListener('mousedown', startDragging, false);
  slidingElement.addEventListener('mouseup', stopDragging, false);
  slidingElement.addEventListener('mouseleave', stopDragging, false);

  /** End sliding carousel handling **/

  function performLandingPageSetup() {
    scrollChevron.onclick = () => {
      window.scrollTo({
        top: firstSectionScrollPosition,
        behavior: 'smooth'
      })
    }

    console.log(`Setting up landing page`)
    // Second video needs a special width so that it's not the full page
    const specialVideoWidthVideoElement = document.getElementById(specialVideoTagWidth);
    const specialVideoWidth = Math.round(window.innerWidth * 0.98);
    specialVideoWidthVideoElement.setAttribute('width', specialVideoWidth)

    // Outtro video needs a special width so that it's not the full page
    const outtroVideoTagWidthElement = document.getElementById(outtroVideoTagWidth)
    const outtroVideoWidth = Math.round(window.innerWidth * 0.40);
    outtroVideoTagWidthElement.setAttribute('width', outtroVideoWidth)

    // Outtro video needs to straddle two elements and needs a negative margin.  Need to calculate
    // the margin after the page and the video are loaded so that we know the exact video dimensions.
    const fifthVideoContainerElement = document.getElementById(outtroVideoTagWidth)
    console.log(`Outtro video height reporting as: ${outtroVideoTagWidthElement.offsetHeight}`)
    const fifthVideoContainerElementMargin = Math.round(outtroVideoTagWidthElement.offsetHeight / 2)
    fifthVideoContainerElement.style.marginTop = `-${fifthVideoContainerElementMargin}px`

    // Also need to update the text that should sit right below the video based on the dynamic amount.
    const escapeNoiseTextElement = document.getElementById('escape-noise-text')
    // const escapeNoiseTextElementMarginTop = outtroVideoTagWidthElement.videoHeight
    // escapeNoiseTextElement.style.marginTop = `${escapeNoiseTextElementMarginTop}px`

    const fullSizeVideoTagsArray = [...videoTags]

    // For all full width videos, set the widths based on the browser width
    fullSizeVideoTagsArray.forEach((tag) => {
      const video = document.getElementById(tag)
      video.setAttribute('width', window.innerWidth)

      console.log(`Handling tag: ${tag}`)

      // Size the opacity layer to match the first video, if that's what we're on.
      if (tag === 'first-video') {
        const opacityLayer = document.getElementById('first-video-mask')
        opacityLayer.style.width = '100%'
        opacityLayer.style.height = `${video.videoHeight}px`
      }
    })

    const combinedTagsArray = [...videoTags, specialVideoTagWidth, outtroVideoTagWidth]

    combinedTagsArray.forEach((currentTag) => {
      const video = document.getElementById(currentTag)
      if (video) {
        video.addEventListener('ended', () => {
          video.play()
        })
      } else {
        console.log(`Couldn't set auto replay on video element tag ${currentTag}`)
      }
    })

    function scrollTop() {
      window.scrollTo(0, 0)
    }

    const backToTopElement = document.getElementById(backToTopElementTag)
    backToTopElement.onclick = scrollTop

    const navbarElement = document.getElementById(navbarId)
    navbarElement.style.display = 'flex'
    navbarElement.onclick = scrollTop

    checkForChromeMobileWidthBug()
    fixQuadBannerImageElementWhiteLinesBug()
  }

  const landingPageElement = document.getElementById('landing-page')
  function disableIntroVideoAndEnableMainLandingPage() {
    console.log(`Disable intro video called`)
    const introVideoElement = document.getElementById('intro-video')

    introVideoElement.style.display = 'none'
    landingPageElement.style.display = 'initial'

    performLandingPageSetup()
  }

  // Intro video may be hiding the controls at the bottom of the page, which is confusing because the
  // video starts with a black screen.  Auto-scroll to the bottom so that the player can show its elements.
  const introVideoElement = document.getElementById('intro-video-player')
  const skipIntroButtonElement = document.getElementById('skip-intro-button')
  introVideoElement.addEventListener('canplay', () => {
    window.scrollTo(0, introVideoElement.offsetHeight)

    const loadingSpinner = document.getElementById('loading-spinner')

    setTimeout(() => {
      loadingSpinner.style.display = 'none'
    }, 3500)
  })

  // Reset intro video width as part of setup, or as part of a screen rotation
  function resetIntroVideoWidth() {
    introVideoElement.setAttribute('width', window.innerWidth)
    skipIntroButtonElement.style.top = `${introVideoElement.offsetHeight - 70}px`
  }

  resetIntroVideoWidth()

  introVideoElement.addEventListener('ended', disableIntroVideoAndEnableMainLandingPage)

  skipIntroButtonElement.onclick = () => {
    disableIntroVideoAndEnableMainLandingPage()
    introVideoElement.pause()
  }

  function isMobile() {
    const userAgent = navigator.userAgent || navigator.vendor || window.opera

    // This humdinger brought to you by http://detectmobilebrowsers.com/
    return /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(userAgent) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(userAgent.substr(0, 4))
  }

  function isVertical() {
    return window.innerHeight > window.innerWidth
  }

  const introVideoContainer = document.getElementById('intro-video')

  let introVideoState
  let landingPageState
  const rotateMessageElement = document.getElementById('rotate-screen')
  function showRotateMessage() {
    introVideoState = introVideoContainer.style.display
    landingPageState = landingPageElement.style.display

    introVideoContainer.style.display = 'none'
    landingPageElement.style.display = 'none'
    rotateMessageElement.style.display = 'flex'
  }

  function hideRotateMessage() {
    rotateMessageElement.style.display = 'none'
    introVideoContainer.style.display = introVideoState
    landingPageElement.style.display = landingPageState
  }

  function isLandingPageElementVisible() {
    return landingPageElement.style.display !== 'none'
  }

  function isIntroVideoVisible() {
    return introVideoContainer.style.display !== 'none'
  }

  // For some reason on Chrome Mobile views, elements set to "width: 100%;" are not fitting to the full width after rotation.
  // Hack to fix this is to specify which elements aren't resizing properly and forcing them to be the width of
  // the page.
  function checkForChromeMobileWidthBug() {
    const parentVideoElement = document.getElementById('first-video-parent')
    console.log(`Chrome width bug detected!`)
    if (chromeMobileWidthBugDetected || isLandingPageElementVisible() && window.innerWidth !== parentVideoElement.offsetWidth) {
      chromeMobileWidthBugDetected = true
      const landingPageElement = document.getElementById('landing-page')

      // Basically all root elements within the landing page element need to be dynamically set
      const landingPageChildren = landingPageElement.children

      for (let i = 0; i < landingPageChildren.length; ++i) {
        const child = landingPageChildren[i]
        child.style.width = `${window.innerWidth}px`
      }

      // Special case where we need an overlay to be dynamically set as well
      const firstVideoOverlay = document.getElementById('first-video-mask')
      firstVideoOverlay.style.width = `${window.innerWidth}px`

      const thirdVideoOverlay = document.getElementById('third-video-overlay')
      thirdVideoOverlay.style.width = `${window.innerWidth}px`
    }
  }

  let bedroomGallery = new SimpleLightbox('.bedroom-gallery a')
  let bathroomGallery = new SimpleLightbox('.bathroom-gallery a')
  let livingSpaceGallery = new SimpleLightbox('.living-space-gallery a')
  let outdoorGallery = new SimpleLightbox('.outdoor-gallery a')

  const lightboxRefs = [bedroomGallery, bathroomGallery, livingSpaceGallery, outdoorGallery]

  const quadBannerElements = document.getElementsByClassName('quad-banner-element')
  for (let i = 0; i < quadBannerElements.length; ++i) {
    const quadBannerElement = quadBannerElements[i]

    quadBannerElement.addEventListener('mouseover', (e) => {
      const targetElement = e.target
      const trueTarget = targetElement.tagName !== 'DIV' ? targetElement.parentElement : targetElement

      const bannerElementText = trueTarget.getElementsByClassName('quad-banner-text')[0]
      bannerElementText.classList.add('qb-hover-effect')
    })

    quadBannerElement.addEventListener('mouseout', (e) => {
      const targetElement = e.target
      const trueTarget = targetElement.tagName !== 'DIV' ? targetElement.parentElement : targetElement

      const bannerElementText = trueTarget.getElementsByClassName('quad-banner-text')[0]
      bannerElementText.classList.remove('qb-hover-effect')
    })

    quadBannerElement.onclick = () => {
      lightboxRefs[i].open()
    }
  }

  function fixQuadBannerImageElementWhiteLinesBug() {
    const bannerImages = document.getElementsByClassName('quad-banner-img')

    for (let i = 0; i < bannerImages.length; ++i) {
      const bannerImage = bannerImages[i]
      const bannerImageParent = bannerImage.parentElement
      const bannerImageParentWidth = bannerImageParent.offsetWidth

      bannerImage.style.width = `${Math.ceil(bannerImageParentWidth) + 1}px`
    }
  }

</script>